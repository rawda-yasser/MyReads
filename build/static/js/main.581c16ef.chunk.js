(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(12),s=a.n(r),l=a(2),c=a(3),i=a(5),u=a(4),h=a(6),p=a(10),d="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var m={credentials:"include",Accept:"application/json",Authorization:f},b=function(){return fetch("".concat(d,"/books"),{headers:m}).then(function(e){return e.json()}).then(function(e){return e.books})},k=function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(p.a)({},m,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},y=a(8),g=a(9),E=a(0),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={shelf:"none"},a.updateShelf=function(e){a.setState({shelf:e.target.value},function(){a.props.updateShelf(a.props.book,a.state.shelf),console.log(a.state)})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.setState({shelf:this.props.book.shelf})}},{key:"render",value:function(){return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:this.updateShelf,value:this.state.shelf},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))}}]),t}(o.a.Component),O=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.book.imageLinks;return e=void 0===e?"https://dummyimage.com/400x600/000/fff.png&text=No+book+image+available":e.thumbnail,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e,"})")}}),o.a.createElement(j,{book:this.props.book,updateShelf:this.props.updateShelf,handleChange:this.props.handleChange})),o.a.createElement("div",{className:"book-title"},this.props.book.title),o.a.createElement("div",{className:"book-authors"},this.props.book.authors))}}]),t}(o.a.Component),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).updateBooks=function(){a.props.updateAllBooks()},a.getTitle=function(){return"currentlyReading"===a.props.shelf?"Currently Reading":"read"===a.props.shelf?"Read":"wantToRead"===a.props.shelf?"Want To Read":void 0},a.updateShelf=function(e,t){k(e,t).then(function(e){a.updateBooks()})},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.getTitle();return o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},t),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},this.props.books.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(O,{book:t,bookTitle:t.title,bookAuthors:t.authors,imageURL:t.imageLinks.thumbnail,updateShelf:e.updateShelf}))}))))))}}]),t}(o.a.Component),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={allBooks:[],currentlyReading:[],wantToRead:[],read:[]},a.updateAllBooks=function(){a.props.retrieveAll()},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.retrieveAll()}},{key:"render",value:function(){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement(R,{shelf:"currentlyReading",updateAllBooks:this.updateAllBooks,books:this.props.currentlyReading}),o.a.createElement(R,{shelf:"wantToRead",updateAllBooks:this.updateAllBooks,books:this.props.wantToRead}),o.a.createElement(R,{shelf:"read",updateAllBooks:this.updateAllBooks,books:this.props.read}),o.a.createElement("div",{className:"open-search"},o.a.createElement(g.b,{to:"/search"},o.a.createElement("button",null,"Add a book"))))}}]),t}(o.a.Component),C=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleChange=function(e){a.props.handleChange(e.target.value)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(g.b,{to:"/"},o.a.createElement("button",{className:"close-search",onClick:this.props.handleClose},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.props.query,onChange:this.handleChange})))}}]),t}(o.a.Component),B=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return console.log("res",this.props.searchedBooks),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},this.props.searchedBooks.map(function(t){return o.a.createElement("li",{key:t.id},o.a.createElement(O,{book:t,updateShelf:e.props.updateShelf,handleChange:e.props.handleChange}))})))}}]),t}(o.a.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getSearchResult(this.props.query)}},{key:"render",value:function(){return o.a.createElement("div",{className:"search-books"},o.a.createElement(C,{query:this.props.query,handleChange:this.props.handleChange}),this.props.checkResultIsEmpty()?o.a.createElement("div",null):o.a.createElement(B,{searchedBooks:this.props.searchedBooks,updateShelf:this.props.updateShelf,handleChange:this.props.handleChange}))}}]),t}(o.a.Component),N=(a(18),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={allBooks:[],currentlyReading:[],wantToRead:[],read:[],searchedBooks:[],query:""},a.retrieveAll=function(){b().then(function(e){var t=e.filter(function(e){return"currentlyReading"===e.shelf}),n=e.filter(function(e){return"wantToRead"===e.shelf}),o=e.filter(function(e){return"read"===e.shelf});a.setState({allBooks:e,currentlyReading:t,wantToRead:n,read:o})})},a.getSearchResult=function(e){v(e).then(function(e){e=a.getArrayResult(e),a.addShelfToResult(e)})},a.handleChange=function(e){a.setState({query:e}),a.getSearchResult(e)},a.addShelfToResult=function(e){var t=a.state.allBooks,n=e;if(void 0===n)a.setState({searchedBooks:[]});else{var o=n.map(function(e){return t.forEach(function(t){e.id===t.id&&(e.shelf=t.shelf)}),e});a.setState({searchedBooks:o})}},a.getArrayResult=function(e){var t=[];if(void 0===e)return[];for(var a=Object.entries(e),n=0;n<a.length;n++){var o=a[n],r=Object(y.a)(o,2)[1];t.push(r)}return t},a.checkResultIsEmpty=function(){var e=a.state.searchedBooks;return null===e||void 0===typeof e||"empty query"===e[0]},a.updateShelf=function(e,t){k(e,t).then(function(e){a.updateBooks()})},a.updateBooks=function(){a.getSearchResult(a.state.query)},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.retrieveAll()}},{key:"render",value:function(){return o.a.createElement(g.a,null,o.a.createElement(E.c,null,o.a.createElement(E.a,{exact:!0,path:"/",element:o.a.createElement(S,{currentlyReading:this.state.currentlyReading,read:this.state.read,wantToRead:this.state.wantToRead,retrieveAll:this.retrieveAll})}),o.a.createElement(E.a,{exact:!0,path:"/search",element:o.a.createElement(A,{searchedBooks:this.state.searchedBooks,getSearchResult:this.getSearchResult,query:this.query,handleChange:this.handleChange,checkResultIsEmpty:this.checkResultIsEmpty,updateShelf:this.updateShelf})})))}}]),t}(o.a.Component)),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={books:[]},a}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;b().then(function(t){e.setState({books:t})})}},{key:"render",value:function(){return o.a.createElement("div",{className:"app"},o.a.createElement(N,null))}}]),t}(o.a.Component);a(20);s.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[13,2,1]]]);
//# sourceMappingURL=main.581c16ef.chunk.js.map